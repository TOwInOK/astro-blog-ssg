---
import { SITE_TITLE } from "@consts";
import HeaderLink from "@components/HeaderLink.astro";
import Link from "@components/Link.astro";
import ArtStationLogo from "@components/ArtStationLogo.astro";
import BehanceLogo from "@components/BehanceLogo.astro";
import Logo from "@components/Logo.astro";
---

<header
    class="px-4 text-white bg-black shadow-md fixed top-0 left-0 w-full z-50"
>
    <nav class="flex justify-between items-center h-20">
        <!-- Лого -->
        <Link
            href="/"
            class="no-underline flex text-2xl items-center text-accent"
        >
            <Logo class="w-16 h-12" />
        </Link>

        <!-- Десктопные ссылки -->
        <div class="hidden md:flex items-center justify-center gap-6 h-full">
            <HeaderLink href="/">Main</HeaderLink>
            <HeaderLink href="/blog">Portfolio</HeaderLink>
            <HeaderLink href="/about">About me</HeaderLink>
        </div>

        <!-- Соцсети на десктопе -->
        <div class="hidden md:flex items-center justify-end gap-4">
            <ArtStationLogo href="/" />
            <BehanceLogo href="/" />
        </div>

        <!-- Бургер на мобиле -->
        <div class="md:hidden">
            <button
                id="menu-btn"
                class="flex flex-col gap-1.5 p-2 focus:outline-none"
                aria-label="Toggle menu"
            >
                <span class="w-6 h-0.5 bg-white"></span>
                <span class="w-6 h-0.5 bg-white"></span>
                <span class="w-6 h-0.5 bg-white"></span>
            </button>
        </div>
    </nav>

    <!-- Off-canvas меню -->
    <div
        id="mobile-menu"
        class="fixed top-0 right-0 h-full w-64 bg-black text-white transform translate-x-full transition-transform duration-300 ease-in-out z-50 flex flex-col gap-6 p-6 md:hidden"
    >
        <!-- Кнопка закрытия -->
        <button
            id="close-menu"
            class="self-end text-2xl font-bold focus:outline-none"
        >
            ✕
        </button>

        <!-- Навигация -->
        <HeaderLink href="/">Main</HeaderLink>
        <HeaderLink href="/blog">Portfolio</HeaderLink>
        <HeaderLink href="/about">About me</HeaderLink>

        <!-- Соцсети -->
        <div class="flex gap-6 mt-auto justify-center items-center py-4">
            <ArtStationLogo href="/" />
            <BehanceLogo href="/" />
        </div>
    </div>

    <!-- Подложка -->
    <div
        id="menu-overlay"
        class="fixed inset-0 bg-black bg-opacity-50 hidden z-40 md:hidden"
    >
    </div>
</header>

<script is:inline>
    const btn = document.getElementById("menu-btn");
    const closeBtn = document.getElementById("close-menu");
    const menu = document.getElementById("mobile-menu");
    const overlay = document.getElementById("menu-overlay");

    console.log("[TRACE] init header script");

    function openMenu() {
        menu.classList.remove("translate-x-full");
        overlay.classList.remove("hidden");
    }

    function closeMenu() {
        menu.classList.add("translate-x-full");
        overlay.classList.add("hidden");
    }

    btn?.addEventListener("click", () => {
        openMenu();
    });

    closeBtn?.addEventListener("click", () => {
        closeMenu();
    });

    overlay?.addEventListener("click", () => {
        closeMenu();
    });
</script>
